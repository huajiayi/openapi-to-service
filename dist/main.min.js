!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("umi-request"),require("fs"),require("ejs"),require("path")):"function"==typeof define&&define.amd?define(["umi-request","fs","ejs","path"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).View=t(e.request,e.fs,e.ejs,e.path)}(this,(function(e,t,r,i){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=n(e),s=n(t),o=n(r);const u=e=>["int64","integer","long","float","double","number","int","float","double","int32","int64"].includes(e)?"number":["Date","date","dateTime","date-time","datetime"].includes(e)||["string","email","password","url","byte","binary"].includes(e)?"string":"boolean"===e?"boolean":"any",d=e=>{const t=[];return Object.keys(e.paths).forEach((r=>{const i=e.paths[r];Object.keys(i).forEach((n=>{const a=i[n],s=((e,t)=>{if(!e||0===e.length)return[];if("body"===e[0]?.in){const r=e?.[0]?.schema.originalRef,i=t[r]?.properties;return Object.keys(i).map((e=>{const t=i[e];return{in:"body",name:e,type:u(t.type),description:t.description,required:!1}}))}return e.map((e=>({in:e.in,name:e.name,type:u(e.type),description:e.description,required:e.required})))})(a.parameters,e.definitions);t.push({name:a.operationId,description:a.summary,request:{url:r.replace("{","${"),method:n.toUpperCase(),params:s,filter:{param:s.filter((e=>"query"===e.in)),body:s.filter((e=>"body"===e.in||"formdata"===e.in))}},response:{type:"any"}})}))})),t},p=async(e,t)=>{const r=d(e),n=i.resolve(__dirname,"../","src","template","umi-request.ejs"),a=await((e,t)=>new Promise(((r,i)=>{o.default.renderFile(e,t,{},((e,t)=>{e&&i(e.message),r(t)}))})))(n,{apis:r});s.default.writeFileSync(t,a)};return async e=>{const{data:t,url:r,output:i}=e;if(!t&&!r)throw new Error("please input either data or url!");if(!i)throw new Error("please input output!");let n={};r&&(n=await a.default.get(r)),t&&(n=JSON.parse(t)),p(n,i)}}));