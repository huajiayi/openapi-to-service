import { request } from 'umi';

<% apis.forEach((api) => { -%>
/**
 * <%= api.description %>  <%= api.request.method %> <%= api.request.url %>
 */
export async function <%= api.name %> (
  <%_ if(api.request.filter.param.length !== 0) { -%>
  params: {
    <%_ api.request.filter.param.forEach((param) => { -%>
    <%= param.name %><% if(param.required) { %>?<% } %>: <%= param.type %>
    <%_ }); -%>
  },
  <%_ } -%>
  <%_ if(api.request.filter.body.length !== 0) { -%>
  body: {
    ...body,
  },
  <%_ } -%>
  options?: Record<string, any>,
) {
  return request<<%= api.response.type %>>('<%= api.request.url %>', {
    method: '<%= api.request.method %>',
    <%_ if(api.request.filter.param.length !== 0) { -%>
    params: {
      ...params,
    },
    <%_ } -%>
    <%_ if(api.request.filter.body.length !== 0) { -%>
    body: {
      ...body,
    },
    <%_ } -%>
    ...(options || {}),
  });
}
<% }); -%>